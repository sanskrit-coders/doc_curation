\documentclass[12pt,openany]{book} % 'openany' prevents empty pages between chapters
\usepackage{fontspec}
\usepackage{ucharclasses}
\usepackage{hyperref}
\usepackage{xcolor}
\usepackage{etoolbox} % For patching chapter behavior

__PAPER_GEOMETRY__

% --- FONT CONFIGURATION ---
% Latin font
\setmainfont{Noto Sans}[Script=Latin,Renderer=HarfBuzz]

% Devanagari font with Fake Slant
\newfontfamily\devanagarifont{Noto Sans Devanagari}[
  Script=Devanagari,
  Renderer=HarfBuzz,
  Scale=1.3,
  % This adds the fake slant for italics
  ItalicFont={Noto Sans Devanagari},
  ItalicFeatures={FakeSlant=0.2},
  BoldItalicFont={Noto Sans Devanagari},
  BoldItalicFeatures={FakeSlant=0.2, Weight=Bold}
]

% Automatic switching rules
\setTransitionsForDevanagari{\devanagarifont}{\rmfamily}
\setTransitionsForDevanagariExtended{\devanagarifont}{\rmfamily}
\setTransitionsForDevanagariExtendedA{\devanagarifont}{\rmfamily}
\setTransitionsForVedicExtensions{\devanagarifont}{\rmfamily}
\setTransitionsFor{DevanagariDanDa}{\devanagarifont}{\rmfamily}

% --- SECTIONING & SPACING ---
\usepackage{titlesec}

% 1. Remove page breaks for Parts and Chapters
% This redefines \part and \chapter to behave like \section (no \clearpage)
\makeatletter
\renewcommand\part{\@startsection{part}{0}{\z@}%
  {-3.5ex \@plus -1ex \@minus -.2ex}%
  {1ex \@plus.2ex}% % Reduced space after
  {\normalfont\Large\bfseries}}

\renewcommand\chapter{\@startsection{chapter}{1}{\z@}%
  {-3.5ex \@plus -1ex \@minus -.2ex}%
  {1ex \@plus.2ex}% % Reduced space after
  {\normalfont\Large\bfseries}}
\makeatother

% 2. Format Titles (Sizes and Labels)
\titleformat{\part}[hang]{\normalfont\normalsize\bfseries}{\thepart}{1.5em}{}
\titleformat{\chapter}[hang]{\normalfont\normalsize\bfseries}{\thechapter}{1.4em}{}
\titleformat{\section}[hang]{\normalfont\normalsize\bfseries}{\thesection}{1.2em}{}
\titleformat{\subsection}[hang]{\normalfont\normalsize\bfseries}{\thesubsection}{1.1em}{}
\titleformat{\subsubsection}[hang]{\normalfont\normalsize\bfseries}{\thesubsubsection}{1em}{}

% 3. Tighten Spacing (Left, Before, After)
% \titlespacing*{command}{left}{before-sep}{after-sep}
\titlespacing*{\part}{0pt}{12pt}{6pt}
\titlespacing*{\chapter}{0pt}{12pt}{6pt}
\titlespacing*{\section}{0pt}{10pt}{4pt}
\titlespacing*{\subsection}{0pt}{8pt}{3pt}
\titlespacing*{\subsubsection}{0pt}{6pt}{2pt}

% Suppress “Part”, “Chapter”, etc. labels:
\renewcommand{\partname}{}
\renewcommand{\chaptername}{}
\renewcommand{\sectionname}{}

% --- TABLE OF CONTENTS ---
\usepackage{tocloft}
\renewcommand{\contentsname}{Contents}
\renewcommand{\cftpartfont}{\bfseries\normalsize}
\renewcommand{\cftchapfont}{\bfseries\normalsize}
\renewcommand{\cftsecfont}{\bfseries\normalsize}
% Remove the page breaks before TOC if desired
\patchcmd{\tableofcontents}{\clearpage}{}{}{}

% Inline comment style
\newcommand{\inlinecomment}[1]{%
  {\color[HTML]{1B1B1B}\textit{\small\raisebox{-0.3ex}{#1}}}%
}

__METADATA__

\begin{document}
\tableofcontents
% \newpage % Removed to keep things compact

__LATEX_BODY__

\end{document}